+++
title = "Vim"
date = 2023-03-10
+++

Vim 是 Vi 的改进版本，全称为 Vi IMproved (Vi 改进), 初次发布的名称为 Vi IMitation (Vi 模仿)

<!-- more -->

> Website: [https://www.vim.org/](https://www.vim.org/)
>
> GitHub: [https://github.com/vim/vim](https://github.com/vim/vim)
>
> 参考：[https://zhuanlan.zhihu.com/p/68111471](https://zhuanlan.zhihu.com/p/68111471)

## 模式

- 正常模式 (Normal-mode)
- 插入模式 (Insert-mode)
- 命令模式 (Command-mode)
- 可视模式 (Visual-mode)

### 正常模式 (Normal-mode)

正常模式一般用于浏览文件，也包括一些复制、粘贴、删除等操作。这时击键时，一些组合键就是 Vim 的功能键，而不会在文本中键入对应的字符。

在这个模式下，我们可以通过键盘在文本中快速移动光标，光标范围从小到大是字符、单词、行、句子、段落和屏幕。启动 Vim 后默认位于正常模式。不论是什么模式，按一下 `Esc` 键（有时可能需要按两下，插入模式按一下 `Esc` ，就会切换到正常模式，命令模式或者可视模式下执行完操作以后，就会自动进入正常模式，如果进入命令模式或者可视模式没有执行任何操作，按两下 `Esc` 即可）都会进入正常模式。

下面的三个模式都是过键盘上相应的键位去触发的。

### 插入模式 (Insert-mode)

在正常模式中按下个别字母键（后面会详细介绍），会进入插入模式。
例如按 i 键会进行插入模式。该模式启动以后，就会进入编辑状态，通过键盘输入内容。

### 命令模式 (Command-mode)

在正常模式中，按下 `:`（冒号）键或者 `/` （斜杠），会进入命令模式。在命令模式中可以执行一些输入并执行一些 Vim 或插件提供的指令，就像在 shell 里一样。这些指令包括设置环境、文件操作、调用某个功能等等。

### 可视模式 (Visual-mode)

在正常模式按下 `v` `V` `Ctrl + v`，可以进入可视模式。可视模式中的操作有点像拿鼠标进行操作，选择文本的时候有一种鼠标选择的即视感，有时候会很方便。

## 打开文件

```bash
vim file1 # 单文件
vim file1 file2 ... # 多文件
```

### 多文件切换

命令模式下输入

- `:ls` 列出打开的所有文件
- `:b2` 切换到第 2 个文件

### 多文件分屏显示

```bash
vim -O2 file1 file2 # 左右分屏2个
vim -O3 file1 file2 file3 # 左右分屏3个
vim -o2 file1 file2 # 上下分屏2个
```

O 大写是左右分屏，小写是上下分屏

### 分屏操作

- `Ctrl + w s` 上下分屏当前文件
- `:sp file1` 上下分屏当前文件，并打开 file1

- `Ctrl + w v` 左右分屏当前文件
- `:vsp file1` 左右分屏当前文件，并打开 file1

- `Ctrl + w h` 切换左右分屏光标向左
- `Ctrl + w l` 切换左右分屏光标向右
- `Ctrl + w H` 移动当前分屏向左移动
- `Ctrl + w L` 移动当前分屏向右移动

- `Ctrl + w j` 切换上下分屏光标向下
- `Ctrl + w k` 切换上下分屏光标向上
- `Ctrl + w J` 移动当前分屏向下移动
- `Ctrl + w K` 移动当前分屏向上移动

- `Ctrl + w c` 关闭当前的分屏
- `Ctrl + w q` 关闭当前的分屏，如果是最后一个分屏将会退出 VIM 。

## 保存文件与退出

- `:w` 保存文件，可以理解为 `Ctrl + s`
- `:w!` 强制保存文件
- `:w file1` 另存为 file1
- `:q` 退出 Vim (文件未改动)
- `:qa` 退出所有文件 (文件未改动)
- `:qa` 退出所有文件 (文件未改动)
- `:wq` 保存文件并退出 Vim
- `:q!` 强制退出放弃未保存文件的改动
